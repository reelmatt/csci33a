{% extends "base.html" %}

{% block title %}
  Your Library
{% endblock %}

{% block pagehead %}
  Your Library
{% endblock %}

{% block body %}
    <h1>{{edition.edition.book.title}}</h1>
    <img src="{{edition.edition.cover}}">
    <h2>by{% for author in edition.edition.book.authors.all %}
      {{author}}
      {% endfor %}
    </h2>
    <p>ISBN 10: {{edition.edition.isbn_10|default:"None listed."}}</p>
    <p>Publication year: {{edition.edition.pub_year|default:"None listed."}}</p>

    <h4>Events</h4>
    {% for event in events %}
      <p>{{event}} - {{event.event_time}}</p>
    {% empty %}
      <p>No events logged yet.</p>
    {% endfor %}

    {% if edition %}
      <form method="POST" action="{% url 'status update' edition.id%}">
        {% csrf_token %}
        <div class="form-group">
          <label for="action">Status</label>

          <select class="form-control" name="action" id="action">
            <option value=""></option>
            {% for action in actions %}
              <option value="{{action}}">{{action}}</option>
            {% endfor %}
          </select>
          </div>
          <div class="form-group">
            <label for="numPages">Number of pages read</label>
            <input type="number" class="form-control" name="numPages" id="numPages">
          </div>
          <div class="form-group">
            <label for="numMinutes">Number of minutes listened</label>
            <input type="number" class="form-control" name="numMinutes" id="numMinutes">
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="bookFinished" id="bookFinished">
            <label class="form-check-label" for="bookFinished">Book finished?</label>
          </div>

        <button type="submit" class="btn btn-primary">New status</button>
      </form>
    {% else %}
      <p>Could not find an edition with that ID. Go back and try again.</p>
    {% endif %}
{% endblock %}
